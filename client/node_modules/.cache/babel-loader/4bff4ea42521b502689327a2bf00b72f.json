{"ast":null,"code":"var _jsxFileName = \"/home/amira/Bureau/copie-projet-chef-d-oeuvreV10/client/src/components/dashboardClient/clientAttente.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Pagination } from \"antd\";\nimport axios from \"axios\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport moment from \"moment\";\nimport { getReservation, deleteReservationInDB, editDecisionInDB } from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\nexport class ReservationAttente extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      pageSize: 3,\n      paiment: \"\"\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        paiment: e.target.files[0]\n      });\n      console.log(\"devis\", e.target.files[0].name);\n    };\n\n    this.upload = e => {\n      const formData = new FormData();\n      formData.append(\"devis\", this.state.paiment);\n      axios.post(\"http://localhost:8000/\", formData).then(res => {\n        console.log(this.state.devis.name);\n      });\n    };\n\n    this.page = (page, pageSize) => {\n      this.setState({\n        page: page,\n        pageSize: pageSize\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getUser();\n    this.props.getAideFromDB();\n    this.props.getReservation();\n  }\n  /********* upload img ********** */\n\n\n  render() {\n    const reservations = this.props.reservation.filter(el => el.client._id.toString() === this.props.user._id.toString());\n    console.log(\"u\", reservations);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"liste-reservation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"reservartion-client\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, \"Mes r\\xE9servations\"), reservations.length ? /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      className: \"table-reserv-client\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, \"Nom-Pr\\xE9nom-Aide\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, \"D\\xE9l\\xE9gation\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, \"Service\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, \"Jour\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, \"Exp\\xE9rience\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, \"Age\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"Devis\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, \"Actions\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Etat\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, reservations // pagination\n    .filter((l, index) => (this.state.page - 1) * this.state.pageSize <= index && index < this.state.page * this.state.pageSize).map((el, i) => /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      ribbon: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 23\n      }\n    }, el.nom)), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, el.ville), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, el.service), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, el.dispo), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, el.exp), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, el.age), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, el.decision === \"Validée\" ? /*#__PURE__*/React.createElement(\"a\", {\n      href: `http://localhost:8000/${el.devis}`,\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }, \" \", \"Devis\", \" \") : el.decision), /*#__PURE__*/React.createElement(Table.Cell, {\n      className: \"pos-Action \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      size: \"sm\",\n      disabled: el.decision == \"Validée\" ? true : false,\n      onClick: () => this.props.deleteReservationInDB(el._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 23\n      }\n    }, el.decision == \"Validée\" ? null : /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-trash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, \" \", moment(el.dateoff, \"YYYYMMDD\").fromNow()), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, \" \", el.decision !== \"En attente\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: e => this.handleInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      size: \"sm\",\n      onClick: () => (this.upload(), this.props.editDecisionInDB({\n        _id: el._id,\n        paiment: this.state.devis.name\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 27\n      }\n    }, \"T\\xE9l\\xE9charger\"), /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      size: \"sm\",\n      className: \"but-etat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 27\n      }\n    }, \"+\")) : \"-----\"))), \" \"), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    })))) : /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, \"pas de reservations\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-left left-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Pagination, {\n      defaultCurrent: 1,\n      pageSize: 3,\n      onChange: this.page,\n      total: this.props.aides.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-right right-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    aides: state.aides,\n    user: state.auth,\n    reservation: state.reservation\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  deleteReservationInDB,\n  editDecisionInDB\n})(ReservationAttente);","map":{"version":3,"sources":["/home/amira/Bureau/copie-projet-chef-d-oeuvreV10/client/src/components/dashboardClient/clientAttente.js"],"names":["React","Component","connect","Pagination","axios","getAideFromDB","moment","getReservation","deleteReservationInDB","editDecisionInDB","getUser","Label","Table","Button","ReservationAttente","state","page","pageSize","paiment","handleInput","e","setState","target","files","console","log","name","upload","formData","FormData","append","post","then","res","devis","componentDidMount","props","render","reservations","reservation","filter","el","client","_id","toString","user","length","l","index","map","i","nom","ville","service","dispo","exp","age","decision","dateoff","fromNow","aides","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Pagination } from \"antd\";\nimport axios from \"axios\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport moment from \"moment\";\n\nimport {\n  getReservation,\n  deleteReservationInDB,\n  editDecisionInDB,\n\n} from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\n\nexport class ReservationAttente extends Component {\n  state = {\n    page: 1,\n    pageSize: 3,\n    paiment: \"\",\n  };\n  componentDidMount() {\n    this.props.getUser();\n    this.props.getAideFromDB();\n    this.props.getReservation();\n  }\n  /********* upload img ********** */\n  handleInput = (e) => {\n    this.setState({ paiment: e.target.files[0] });\n    console.log(\"devis\", e.target.files[0].name);\n  };\n\n  upload = (e) => {\n    const formData = new FormData();\n    formData.append(\"devis\", this.state.paiment);\n    axios.post(\"http://localhost:8000/\", formData).then((res) => {\n      console.log(this.state.devis.name);\n    });\n  };\n  // handle pagination\n  page = (page, pageSize) => {\n    this.setState({ page: page, pageSize: pageSize });\n  };\n\n  render() {\n    const reservations = this.props.reservation.filter(\n      (el) => el.client._id.toString() === this.props.user._id.toString()\n    );\n\n    console.log(\"u\", reservations);\n    return (\n      <div className=\"liste-reservation\">\n        <h1 className=\"reservartion-client\">Mes réservations</h1>\n\n        {reservations.length ? (\n          <Table celled className=\"table-reserv-client\">\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Nom-Prénom-Aide</Table.HeaderCell>\n                <Table.HeaderCell>Délégation</Table.HeaderCell>\n                <Table.HeaderCell>Service</Table.HeaderCell>\n                <Table.HeaderCell>Jour</Table.HeaderCell>\n                <Table.HeaderCell>Expérience</Table.HeaderCell>\n                <Table.HeaderCell>Age</Table.HeaderCell>\n                <Table.HeaderCell>Devis</Table.HeaderCell>\n                <Table.HeaderCell>Actions</Table.HeaderCell>\n                <Table.HeaderCell>Date</Table.HeaderCell>\n                <Table.HeaderCell>Etat</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n              {reservations // pagination\n                .filter(\n                  (l, index) =>\n                    (this.state.page - 1) * this.state.pageSize <= index &&\n                    index < this.state.page * this.state.pageSize\n                )\n                .map((el, i) => (\n                  <Table.Row>\n                    <Table.Cell>\n                      <Label ribbon>{el.nom}</Label>\n                    </Table.Cell>\n                    <Table.Cell>{el.ville}</Table.Cell>\n                    <Table.Cell>{el.service}</Table.Cell>\n                    <Table.Cell>{el.dispo}</Table.Cell>\n                    <Table.Cell>{el.exp}</Table.Cell>\n                    <Table.Cell>{el.age}</Table.Cell>\n\n                    <Table.Cell>\n                      {el.decision === \"Validée\" ? (\n                        <a\n                          href={`http://localhost:8000/${el.devis}`}\n                          target=\"_blank\"\n                        >\n                          {\" \"}\n                          Devis{\" \"}\n                        </a>\n                      ) : (\n                        el.decision\n                      )}\n                    </Table.Cell>\n\n                    <Table.Cell className=\"pos-Action \">\n                      {/* <Button secondary>\n                      <ModifEvent el={el} />\n                    </Button> */}\n\n                      <Button\n                        outline\n                        size=\"sm\"\n                        disabled={el.decision == \"Validée\" ? true : false}\n                        onClick={() => this.props.deleteReservationInDB(el._id)}\n                      >\n                        {el.decision == \"Validée\" ? null : (\n                          <i class=\"fas fa-trash\"></i>\n                        )}\n                      </Button>\n                    </Table.Cell>\n                    <Table.Cell>\n                      {\" \"}\n                      {moment(el.dateoff, \"YYYYMMDD\").fromNow()}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {\" \"}\n                      {el.decision !== \"En attente\" ? (\n                        <>\n                          <input type=\"file\"  onChange={(e) => this.handleInput(e)}/>\n                          <Button\n                      \n                            outline\n                            size=\"sm\"\n                            onClick={() => (this.upload(),\n                              this.props.editDecisionInDB({\n                                _id: el._id,\n                                paiment: this.state.devis.name,}))}\n                          >\n                            Télécharger\n                          </Button>\n                          <Button outline size=\"sm\" className=\"but-etat\">\n                            +\n                          </Button>\n                        </>\n                      ) : (\n                        \"-----\"\n                      )}\n                    </Table.Cell>\n                  </Table.Row>\n                ))}{\" \"}\n            </Table.Body>\n\n            <Table.Footer>\n              <Table.Row>\n                <Table.HeaderCell colSpan=\"3\"></Table.HeaderCell>\n              </Table.Row>\n            </Table.Footer>\n          </Table>\n        ) : (\n          <h1>pas de reservations</h1>\n        )}\n        {/************** * Pagination ******************/}\n        <div className=\"pagination\">\n          <i class=\"fas fa-angle-double-left left-page\"></i>{\" \"}\n          <Pagination\n            defaultCurrent={1}\n            pageSize={3}\n            onChange={this.page}\n            total={this.props.aides.length}\n          />\n          <i class=\"fas fa-angle-double-right right-page\"></i>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    aides: state.aides,\n    user: state.auth,\n    reservation: state.reservation,\n  };\n};\n\n\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  deleteReservationInDB,\n  editDecisionInDB,\n\n})(ReservationAttente);\n"]},"metadata":{},"sourceType":"module"}