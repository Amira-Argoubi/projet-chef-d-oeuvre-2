{"ast":null,"code":"var _jsxFileName = \"/home/amira/Bureau/copie-projet-chef-d-oeuvreV12/client/src/components/dashboardClient/clientAttente.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Pagination } from \"antd\";\nimport axios from \"axios\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport moment from \"moment\";\nimport { Redirect } from \"react-router-dom\";\nimport { getReservation, deleteReservationInDB, editDecisionInDB } from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\nexport class ReservationAttente extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      pageSize: 3,\n      paiement: \"\"\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        paiement: e.target.files[0]\n      });\n      console.log(\"devis\", e.target.files[0].name);\n    };\n\n    this.upload = e => {\n      const formData = new FormData();\n      formData.append(\"devis\", this.state.paiement);\n      axios.post(\"http://localhost:8000/\", formData).then(res => {\n        console.log(\"ok\", res.data);\n      });\n    };\n\n    this.page = (page, pageSize) => {\n      this.setState({\n        page: page,\n        pageSize: pageSize\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getUser();\n    this.props.getAideFromDB();\n    this.props.getReservation();\n  }\n  /********* upload img ********** */\n\n\n  render() {\n    //  ne donner l'accès pour ce component qu'au client!\n    if (this.props.user.role !== \"Client\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 14\n        }\n      });\n    }\n\n    const reservations = this.props.reservation.filter(el => el.client._id.toString() === this.props.user._id.toString());\n    console.log(\"u\", reservations);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"liste-reservation container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"titre-tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, \"Mes r\\xE9servations\"), reservations.length ? /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      className: \"table-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, \"Nom-Pr\\xE9nom-Aide\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"D\\xE9l\\xE9gation\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, \"Service\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, \"Jour\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Exp\\xE9rience\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"Age\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, \"Devis\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"Actions\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"Paiement\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, \"Etat\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, reservations // pagination\n    .filter((l, index) => (this.state.page - 1) * this.state.pageSize <= index && index < this.state.page * this.state.pageSize).map((el, i) => /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, el.nom), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, el.ville), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, el.service), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, el.dispo.map(el => /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }, el))), \" \", /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, el.exp), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, el.age), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, el.decision === \"Validée\" ? /*#__PURE__*/React.createElement(\"a\", {\n      href: `http://localhost:8000/${el.devis}`,\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, \" \", \"Devis\", \" \") : el.decision), /*#__PURE__*/React.createElement(Table.Cell, {\n      className: \"pos-Action \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      size: \"sm\",\n      disabled: el.decision == \"Validée\" ? true : false,\n      onClick: () => this.props.deleteReservationInDB(el._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 23\n      }\n    }, el.decision == \"Validée\" ? null : /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-trash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, \" \", moment(el.dateoff, \"YYYYMMDD\").fromNow()), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, \" \", el.decision == \"Validée\" ? /*#__PURE__*/React.createElement(React.Fragment, null, el.paiement ? \"envoyé\" : /*#__PURE__*/React.createElement(React.Fragment, null, \" \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: e => this.handleInput(e),\n      style: {\n        width: \"118px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      className: \"but-t\\xE9l\\xE9charger\",\n      outline: true,\n      size: \"sm\",\n      onClick: () => (this.upload(), this.props.editDecisionInDB({\n        _id: el._id,\n        paiement: this.state.paiement.name\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    })))) : \"-----\"), /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      size: \"sm\",\n      className: \"but-etat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, el.decision == \"Validée définitive\" ? /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-check-circle vert\",\n      style: {\n        color: \"green\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }) : \"\", el.decision == \"Annulée\" ? /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-minus-circle\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }) : \"\"))), \" \"), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-left left-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Pagination, {\n      defaultCurrent: 1,\n      pageSize: 3,\n      onChange: this.page,\n      total: this.props.aides.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-right right-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    aides: state.aides,\n    user: state.auth,\n    reservation: state.reservation\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  deleteReservationInDB,\n  editDecisionInDB\n})(ReservationAttente);","map":{"version":3,"sources":["/home/amira/Bureau/copie-projet-chef-d-oeuvreV12/client/src/components/dashboardClient/clientAttente.js"],"names":["React","Component","connect","Pagination","axios","getAideFromDB","moment","Redirect","getReservation","deleteReservationInDB","editDecisionInDB","getUser","Label","Table","Button","ReservationAttente","state","page","pageSize","paiement","handleInput","e","setState","target","files","console","log","name","upload","formData","FormData","append","post","then","res","data","componentDidMount","props","render","user","role","reservations","reservation","filter","el","client","_id","toString","length","l","index","map","i","nom","ville","service","dispo","exp","age","decision","devis","dateoff","fromNow","width","color","aides","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Pagination } from \"antd\";\nimport axios from \"axios\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport moment from \"moment\";\nimport { Redirect } from \"react-router-dom\";\n\nimport {\n  getReservation,\n  deleteReservationInDB,\n  editDecisionInDB,\n} from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\n\nexport class ReservationAttente extends Component {\n  state = {\n    page: 1,\n    pageSize: 3,\n    paiement: \"\",\n  };\n  componentDidMount() {\n    this.props.getUser();\n    this.props.getAideFromDB();\n    this.props.getReservation();\n  }\n  /********* upload img ********** */\n  handleInput = (e) => {\n    this.setState({ paiement: e.target.files[0] });\n    console.log(\"devis\", e.target.files[0].name);\n  };\n\n  upload = (e) => {\n    const formData = new FormData();\n    formData.append(\"devis\", this.state.paiement);\n    axios.post(\"http://localhost:8000/\", formData).then((res) => {\n      console.log(\"ok\", res.data);\n    });\n  };\n  // handle pagination\n  page = (page, pageSize) => {\n    this.setState({ page: page, pageSize: pageSize });\n  };\n\n  render() {\n    //  ne donner l'accès pour ce component qu'au client!\n\n    if (this.props.user.role !== \"Client\") {\n      return <Redirect to=\"/\" />;\n    }\n    const reservations = this.props.reservation.filter(\n      (el) => el.client._id.toString() === this.props.user._id.toString()\n    );\n\n    console.log(\"u\", reservations);\n    return (\n      <div className=\"liste-reservation container-fluid\">\n        <h1 className=\"titre-tab\">Mes réservations</h1>\n\n        {reservations.length ? (\n          <Table celled>\n            <Table.Header className=\"table-header\">\n              <Table.Row>\n                <Table.HeaderCell >Nom-Prénom-Aide</Table.HeaderCell>\n                <Table.HeaderCell>Délégation</Table.HeaderCell>\n                <Table.HeaderCell>Service</Table.HeaderCell>\n                <Table.HeaderCell>Jour</Table.HeaderCell>\n                <Table.HeaderCell>Expérience</Table.HeaderCell>\n                <Table.HeaderCell>Age</Table.HeaderCell>\n                <Table.HeaderCell>Devis</Table.HeaderCell>\n                <Table.HeaderCell>Actions</Table.HeaderCell>\n                <Table.HeaderCell>Date</Table.HeaderCell>\n                <Table.HeaderCell>Paiement</Table.HeaderCell>\n                <Table.HeaderCell>Etat</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n              {reservations // pagination\n                .filter(\n                  (l, index) =>\n                    (this.state.page - 1) * this.state.pageSize <= index &&\n                    index < this.state.page * this.state.pageSize\n                )\n                .map((el, i) => (\n                  <Table.Row>\n                    <Table.Cell>{el.nom}</Table.Cell>\n                    <Table.Cell>{el.ville}</Table.Cell>\n                    <Table.Cell>{el.service}</Table.Cell>\n                    <Table.Cell>\n                      {el.dispo.map((el) => (\n                        <p>{el}</p>\n                      ))}\n                    </Table.Cell>{\" \"}\n                    <Table.Cell>{el.exp}</Table.Cell>\n                    <Table.Cell>{el.age}</Table.Cell>\n                    <Table.Cell>\n                      {el.decision === \"Validée\" ? (\n                        <a\n                          href={`http://localhost:8000/${el.devis}`}\n                          target=\"_blank\"\n                        >\n                          {\" \"}\n                          Devis{\" \"}\n                        </a>\n                      ) : (\n                        el.decision\n                      )}\n                    </Table.Cell>\n                    <Table.Cell className=\"pos-Action \">\n                      {/* <Button secondary>\n                      <ModifEvent el={el} />\n                    </Button> */}\n\n                      <Button\n                        outline\n                        size=\"sm\"\n                        disabled={el.decision == \"Validée\" ? true : false}\n                        onClick={() => this.props.deleteReservationInDB(el._id)}\n                      >\n                        {el.decision == \"Validée\" ? null : (\n                          <i class=\"fas fa-trash\"></i>\n                        )}\n                      </Button>\n                    </Table.Cell>\n                    <Table.Cell>\n                      {\" \"}\n                      {moment(el.dateoff, \"YYYYMMDD\").fromNow()}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {\" \"}\n                      {el.decision == \"Validée\" ? (\n                        <>\n                          {el.paiement ? (\n                            \"envoyé\"\n                          ) : (\n                            <>\n                              {\" \"}\n                              <input\n                                type=\"file\"\n                                onChange={(e) => this.handleInput(e)}\n                                style={{ width: \"118px\" }}\n                              />\n                              <Button\n                                className=\"but-télécharger\"\n                                outline\n                                size=\"sm\"\n                                onClick={() => (\n                                  this.upload(),\n                                  this.props.editDecisionInDB({\n                                    _id: el._id,\n                                    paiement: this.state.paiement.name,\n                                  })\n                                )}\n                              >\n                                <i class=\"fas fa-upload\"></i>\n                              </Button>\n                            </>\n                          )}\n                        </>\n                      ) : (\n                        \"-----\"\n                      )}\n                    </Table.Cell>\n                    <Button outline size=\"sm\" className=\"but-etat\">\n                      {el.decision == \"Validée définitive\" ? (\n                        <i\n                          class=\"fas fa-check-circle vert\"\n                          style={{ color: \"green\" }}\n                        ></i>\n                      ) : (\n                        \"\"\n                      )}\n                      {el.decision == \"Annulée\" ? (\n                        <i\n                          class=\"fas fa-minus-circle\"\n                          style={{ color: \"red\" }}\n                        ></i>\n                      ) : (\n                        \"\"\n                      )}\n                    </Button>\n                  </Table.Row>\n                ))}{\" \"}\n            </Table.Body>\n\n            <Table.Footer>\n              <Table.Row>\n                <Table.HeaderCell colSpan=\"3\"></Table.HeaderCell>\n              </Table.Row>\n            </Table.Footer>\n          </Table>\n        ) : null}\n        {/************** * Pagination ******************/}\n        <div className=\"pagination\">\n          <i class=\"fas fa-angle-double-left left-page\"></i>{\" \"}\n          <Pagination\n            defaultCurrent={1}\n            pageSize={3}\n            onChange={this.page}\n            total={this.props.aides.length}\n          />\n          <i class=\"fas fa-angle-double-right right-page\"></i>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    aides: state.aides,\n    user: state.auth,\n    reservation: state.reservation,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  deleteReservationInDB,\n  editDecisionInDB,\n})(ReservationAttente);\n"]},"metadata":{},"sourceType":"module"}