{"ast":null,"code":"var _jsxFileName = \"/home/amira/Bureau/copie-projet-chef-d-oeuvreV8/client/src/components/dashbordAdmin/gestion-admin.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport { Pagination } from \"antd\";\nimport { getReservation, editDecisionInDB } from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\nimport { MDBInput } from \"mdbreact\";\nimport axios from \"axios\";\nexport class GestionReserv extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      decision: \"Validée\",\n      deci: \"Annulée\",\n      devis: \"\",\n      page: 1,\n      pageSize: 3\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        devis: e.target.files[0]\n      });\n      console.log(\"devis\", e.target.files[0].name);\n    };\n\n    this.upload = e => {\n      const formData = new FormData();\n      formData.append(\"devis\", this.state.devis);\n      axios.post(\"http://localhost:8000/\", formData).then(res => {\n        console.log(this.state.devis.name);\n      });\n    };\n\n    this.page = (page, pageSize) => {\n      this.setState({\n        page: page,\n        pageSize: pageSize\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAideFromDB();\n    this.props.getReservation();\n    this.props.getUser();\n  }\n  /********************** upload devis ******************* */\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"liste-reservation \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      className: \"table-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      className: \"title-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 15\n      }\n    }, \"Nom-Pr\\xE9nom-client\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    }, \"D\\xE9l\\xE9gation\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 15\n      }\n    }, \"Num-T\\xE9l\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }\n    }, \"Age\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, \"Adresse\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }, \"Service\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, \"Jours\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, \"Devis\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }\n    }, \"Actions\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, \" D\\xE9cision\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, this.props.reservation // pagination\n    .filter((l, index) => (this.state.page - 1) * this.state.pageSize <= index && index < this.state.page * this.state.pageSize).map((el, i) => /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      ribbon: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, el.nom_prenom)), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, el.ville), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }, el.num_client), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, el.age), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, el.adresse_client), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, el.service), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }\n    }, el.dispo.map(el => /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 23\n      }\n    }, el))), /*#__PURE__*/React.createElement(Table.Cell, {\n      className: \"pos-Action \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      type: \"file\",\n      onChange: e => this.handleInput(e),\n      outline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Table.Cell, {\n      className: \"action-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"valider-button\",\n      outline: true,\n      size: \"sm\",\n      onClick: () => (this.upload(), this.props.editDecisionInDB({\n        _id: el._id,\n        decision: this.state.decision,\n        devis: this.state.devis.name\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-check-square valider but-confirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        borderRadius: \"5px\"\n      },\n      className: \"annuler-button\",\n      outline: true,\n      size: \"sm\",\n      onClick: () => this.props.editDecisionInDB({\n        _id: el._id,\n        decision: this.state.deci\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-trash annuler but-annul\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, \" \", el.decision === \"Validée\" ? /*#__PURE__*/React.createElement(\"img\", {\n      src: \"http://localhost:8000/\" + el.devis,\n      width: \"50px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 23\n      }\n    }) : el.decision))), \" \"), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-left left-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Pagination, {\n      defaultCurrent: 1,\n      pageSize: 3,\n      onChange: this.page,\n      total: this.props.aides.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-angle-double-right right-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    aides: state.aides,\n    reservation: state.reservation,\n    user: state.auth\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  editDecisionInDB\n})(GestionReserv);","map":{"version":3,"sources":["/home/amira/Bureau/copie-projet-chef-d-oeuvreV8/client/src/components/dashbordAdmin/gestion-admin.js"],"names":["React","Component","connect","getAideFromDB","Pagination","getReservation","editDecisionInDB","getUser","Label","Table","Button","MDBInput","axios","GestionReserv","state","decision","deci","devis","page","pageSize","handleInput","e","setState","target","files","console","log","name","upload","formData","FormData","append","post","then","res","componentDidMount","props","render","reservation","filter","l","index","map","el","i","nom_prenom","ville","num_client","age","adresse_client","service","dispo","_id","borderRadius","aides","length","mapStateToProps","user","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport { Pagination } from \"antd\";\n\nimport {\n  getReservation,\n  editDecisionInDB,\n} from \"../../actions/reservationAction\";\nimport { getUser } from \"../../actions/auth\";\nimport { Label, Table, Button } from \"semantic-ui-react\";\nimport { MDBInput } from \"mdbreact\";\nimport axios from \"axios\";\n\nexport class GestionReserv extends Component {\n  state = {\n    decision: \"Validée\",\n    deci: \"Annulée\",\n    devis: \"\",\n    page: 1,\n    pageSize: 3,\n  };\n  componentDidMount() {\n    this.props.getAideFromDB();\n    this.props.getReservation();\n    this.props.getUser();\n  }\n  /********************** upload devis ******************* */\n  handleInput = (e) => {\n    this.setState({ devis: e.target.files[0] });\n    console.log(\"devis\", e.target.files[0].name);\n  };\n\n  upload = (e) => {\n    const formData = new FormData();\n    formData.append(\"devis\", this.state.devis);\n    axios.post(\"http://localhost:8000/\", formData).then((res) => {\n      console.log(this.state.devis.name);\n    });\n  };\n  // handle pagination\n\n  page = (page, pageSize) => {\n    this.setState({ page: page, pageSize: pageSize });\n  };\n  render() {\n    return (\n      <div className=\"liste-reservation \">\n        <Table celled>\n          <Table.Header className=\"table-header\">\n            <Table.Row>\n              <Table.HeaderCell className=\"title-header\">\n                Nom-Prénom-client\n              </Table.HeaderCell>\n              <Table.HeaderCell>Délégation</Table.HeaderCell>\n              <Table.HeaderCell>Num-Tél</Table.HeaderCell>\n              <Table.HeaderCell>Age</Table.HeaderCell>\n\n              <Table.HeaderCell>Adresse</Table.HeaderCell>\n              <Table.HeaderCell>Service</Table.HeaderCell>\n              <Table.HeaderCell>Jours</Table.HeaderCell>\n              <Table.HeaderCell>Devis</Table.HeaderCell>\n              <Table.HeaderCell>Actions</Table.HeaderCell>\n\n              <Table.HeaderCell> Décision</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body>\n            {this.props.reservation\n              // pagination\n              .filter(\n                (l, index) =>\n                  (this.state.page - 1) * this.state.pageSize <= index &&\n                  index < this.state.page * this.state.pageSize\n              )\n              .map((el, i) => (\n                <Table.Row>\n                  <Table.Cell>\n                    <Label ribbon>{el.nom_prenom}</Label>\n                  </Table.Cell>\n                  <Table.Cell>{el.ville}</Table.Cell>\n                  <Table.Cell>{el.num_client}</Table.Cell>\n\n                  <Table.Cell>{el.age}</Table.Cell>\n                  <Table.Cell>{el.adresse_client}</Table.Cell>\n                  <Table.Cell>{el.service}</Table.Cell>\n                  <Table.Cell>\n                    {el.dispo.map((el) => (\n                      <p>{el}</p>\n                    ))}\n                  </Table.Cell>\n                  <Table.Cell className=\"pos-Action \">\n                    <MDBInput\n                      type=\"file\"\n                      onChange={(e) => this.handleInput(e)}\n                      outline\n                    />\n                  </Table.Cell>\n                  <Table.Cell className=\"action-button\">\n                    <Button\n                      className=\"valider-button\"\n                      outline\n                      size=\"sm\"\n                      onClick={() => (\n                        this.upload(),\n                        this.props.editDecisionInDB({\n                          _id: el._id,\n                          decision: this.state.decision,\n                          devis: this.state.devis.name,\n                        })\n                      )}\n                    >\n                      <i class=\"fas fa-check-square valider but-confirm\"></i>\n                    </Button>\n                    <Button\n                    style={{borderRadius:\"5px\"}}\n                      className=\"annuler-button\"\n                      outline\n                      size=\"sm\"\n                      onClick={() =>\n                        this.props.editDecisionInDB({\n                          _id: el._id,\n                          decision: this.state.deci,\n                        })\n                      }\n                    >\n                      <i class=\"fas fa-trash annuler but-annul\"></i>\n                    </Button>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    {\" \"}\n                    {el.decision === \"Validée\" ? (\n                      <img\n                        src={\"http://localhost:8000/\" + el.devis}\n                        width=\"50px\"\n                      />\n                    ) : (\n                      el.decision\n                    )}\n                  </Table.Cell>\n                </Table.Row>\n              ))}{\" \"}\n          </Table.Body>\n\n          <Table.Footer>\n            <Table.Row>\n              <Table.HeaderCell colSpan=\"3\"></Table.HeaderCell>\n            </Table.Row>\n          </Table.Footer>\n        </Table>\n        <div className=\"pagination\">\n          <i class=\"fas fa-angle-double-left left-page\"></i>{\" \"}\n          <Pagination\n            defaultCurrent={1}\n            pageSize={3}\n            onChange={this.page}\n            total={this.props.aides.length}\n          />\n          <i class=\"fas fa-angle-double-right right-page\"></i>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    aides: state.aides,\n    reservation: state.reservation,\n    user: state.auth,\n  };\n};\nexport default connect(mapStateToProps, {\n  getAideFromDB,\n  getReservation,\n  getUser,\n  editDecisionInDB,\n})(GestionReserv);\n"]},"metadata":{},"sourceType":"module"}