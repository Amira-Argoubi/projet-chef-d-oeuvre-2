{"ast":null,"code":"var _jsxFileName = \"/home/amira/Bureau/copie-projet-chef-d-oeuvreV6/client/src/components/dashbordAdmin/gestion-admin.js\";\nimport { getReservation, editDecisionInDB } from \"../../actions/reservationAction\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport { getUser } from \"../../actions/auth\";\nimport axios from \"axios\";\nimport ModalcalenderAdmin from \"./modalcalender\";\nimport ModalDevis from \"./modalDevis\"; //import {addDisabledDays, updateSalle} from \"../Redux/actions/reservation\"\n\nclass GestionReserv extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      decision: \"Valider\",\n      devis: \"\",\n      disabled: \"disabled Days\",\n      valid: \"true\"\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        devis: e.target.files[0]\n      });\n      console.log(\"devis\", e.target.files[0].name);\n    };\n\n    this.upload = e => {\n      const formData = new FormData();\n      formData.append(\"devis\", this.state.devis);\n      axios.post(\"http://localhost:8000/\", formData).then(res => {\n        console.log(this.state.devis.name);\n      });\n    };\n  }\n\n  toggle() {\n    this.setState({\n      disabled: \"enable Days\"\n    });\n  }\n\n  componentDidMount() {\n    this.props.getReservation();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.props.reservations ? /*#__PURE__*/React.createElement(MDBTable, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBTableHead, {\n      color: \"elegant-color-dark\",\n      textWhite: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, \"Nom\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }, \"Entreprise\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, \"Locataire\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, \"salle\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, \"personnes\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, \"Evenement\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }, \"Decision\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, \"Valider\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, \"Ajouter disabled days\"))), /*#__PURE__*/React.createElement(MDBTableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, this.props.reservations.map(el => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    }, el.nomUser), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }\n    }, el.phoneUser), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 19\n      }\n    }, el.etsUser), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }, el.roleUser), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 19\n      }\n    }, el.nomSalle), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(ModalcalenderAdmin, {\n      startDate: el.startDate,\n      endDate: el.endDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 19\n      }\n    }, el.nbre_personne), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }, el.evenement), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    }, el.roleUser === \"userExterne\" && el.decision !== \"en attente\" ? /*#__PURE__*/React.createElement(ModalDevis, {\n      image: el.decision,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 23\n      }\n    }) : el.decision), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, el.roleUser === \"userExterne\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => {\n        this.handleInput(e);\n      },\n      type: \"file\",\n      className: \"custom-file-input\",\n      id: \"inputGroupFile01\",\n      \"aria-describedby\": \"inputGroupFileAddon01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"custom-file-label\",\n      htmlFor: \"inputGroupFile01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 27\n      }\n    }, \"Choose file\"), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MDBBtn, {\n      className: \"btn-sm\",\n      color: \"elegant\",\n      onClick: () => (this.upload(), this.props.updateReservation(el._id, this.state.devis.name)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, \"Devis\")))) : /*#__PURE__*/React.createElement(MDBBtn, {\n      className: \"btn-sm\",\n      outline: true,\n      color: \"success\",\n      onClick: () => this.props.updateReservation(el._id, this.state.decision),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 23\n      }\n    }, \"Valider\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBBtn // btn-blue-grey\n    , {\n      outline: true,\n      color: \"danger\",\n      className: \"btn-sm\",\n      onClick: () => (this.toggle(), this.props.deleteReservation(el._id)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, \"spprimer\")))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  reservation: state.reservation\n});\n\nexport default connect(mapStateToProps, {\n  getReservation,\n  editDecisionInDB,\n  getAideFromDB,\n  getUser\n})(GestionReserv); // import React, { Component } from \"react\";\n// import { connect } from \"react-redux\";\n// import { getAideFromDB } from \"../../actions/aideActionCreator\";\n// import {\n//   getReservation,\n//   editDecisionInDB,\n// } from \"../../actions/reservationAction\";\n// import { getUser } from \"../../actions/auth\";\n// import { Label, Table, Button } from \"semantic-ui-react\";\n// import { MDBInput } from \"mdbreact\";\n// import axios from \"axios\";\n// export class GestionReserv extends Component {\n//   state = {\n//     decision: \"Validée\",\n//     deci: \"Annulée\",\n//     devis: \"\",\n//   };\n//   componentDidMount() {\n//     this.props.getAideFromDB();\n//     this.props.getReservation();\n//     this.props.getUser();\n//   }\n//   /********************** upload devis ******************* */\n//   handleInput = (e) => {\n//     this.setState({ devis: e.target.files[0] });\n//     console.log(\"devis\", e.target.files[0].name);\n//   };\n//   upload = (e) => {\n//     const formData = new FormData();\n//     formData.append(\"devis\", this.state.devis);\n//     axios.post(\"http://localhost:8000/\", formData).then((res) => {\n//       console.log(this.state.devis.name);\n//     });\n//   };\n//   render() {\n//     return (\n//       <div className=\"liste-reservation \">\n//         <Table celled>\n//           <Table.Header>\n//             <Table.Row>\n//               <Table.HeaderCell>Nom-Prénom-client</Table.HeaderCell>\n//               <Table.HeaderCell>Délégation</Table.HeaderCell>\n//               <Table.HeaderCell>Num-Tél</Table.HeaderCell>\n//               <Table.HeaderCell>Age</Table.HeaderCell>\n//               <Table.HeaderCell>Adresse</Table.HeaderCell>\n//               <Table.HeaderCell>Service</Table.HeaderCell>\n//               <Table.HeaderCell>Jours</Table.HeaderCell>\n//               <Table.HeaderCell>Actions</Table.HeaderCell>\n//               <Table.HeaderCell>Devis</Table.HeaderCell>\n//               <Table.HeaderCell> Décision</Table.HeaderCell>\n//             </Table.Row>\n//           </Table.Header>\n//           <Table.Body>\n//             {this.props.reservation.map((el, i) => (\n//               <Table.Row>\n//                 <Table.Cell>\n//                   <Label ribbon>{el.client.nom_prenom}</Label>\n//                 </Table.Cell>\n//                 <Table.Cell>{el.ville}</Table.Cell>\n//                 <Table.Cell>{el.num_client}</Table.Cell>\n//                 <Table.Cell>{el.age}</Table.Cell>\n//                 <Table.Cell>{el.adresse_client}</Table.Cell>\n//                 <Table.Cell>{el.service}</Table.Cell>\n//                 <Table.Cell>\n//                   {el.dispo.map((el) => (\n//                     <p>{el}</p>\n//                   ))}\n//                 </Table.Cell>\n//                 <Table.Cell>\n//                   <Button\n//                     outline\n//                     size=\"sm\"\n//                     onClick={() => (\n//                       this.upload(),\n//                       this.props.editDecisionInDB({\n//                         _id: el._id,\n//                         decision: this.state.decision,\n//                         devis: this.state.devis.name,\n//                       })\n//                     )}\n//                   >\n//                     <i class=\"fas fa-check-square\"></i>\n//                   </Button>\n//                   <Button\n//                     outline\n//                     size=\"sm\"\n//                     onClick={() =>\n//                       this.props.editDecisionInDB({\n//                         _id: el._id,\n//                         decision: this.state.deci,\n//                       })\n//                     }\n//                   >\n//                     <i class=\"fas fa-trash\"></i>\n//                   </Button>\n//                 </Table.Cell>\n//                 <Table.Cell className=\"pos-Action \">\n//                   <MDBInput\n//                     type=\"file\"\n//                     onChange={(e) => this.handleInput(e)}\n//                     outline\n//                   />\n//                 </Table.Cell>\n//                 <Table.Cell>\n//                   {\" \"}\n//                   {el.decision === \"Validée\" ? (\n//                     <img\n//                       src={\"http://localhost:8000/\" + el.devis}\n//                       width=\"50px\"\n//                     />\n//                   ) : (\n//                     el.decision\n//                   )}\n//                 </Table.Cell>\n//               </Table.Row>\n//             ))}{\" \"}\n//           </Table.Body>\n//           <Table.Footer>\n//             <Table.Row>\n//               <Table.HeaderCell colSpan=\"3\"></Table.HeaderCell>\n//             </Table.Row>\n//           </Table.Footer>\n//         </Table>\n//       </div>\n//     );\n//   }\n// }\n// const mapStateToProps = (state) => {\n//   return {\n//     aides: state.aides,\n//     reservation: state.reservation,\n//     user: state.auth,\n//   };\n// };\n// export default connect(mapStateToProps, {\n//   getAideFromDB,\n//   getReservation,\n//   getUser,\n//   editDecisionInDB,\n// })(GestionReserv);","map":{"version":3,"sources":["/home/amira/Bureau/copie-projet-chef-d-oeuvreV6/client/src/components/dashbordAdmin/gestion-admin.js"],"names":["getReservation","editDecisionInDB","getAideFromDB","getUser","axios","ModalcalenderAdmin","ModalDevis","GestionReserv","Component","state","decision","devis","disabled","valid","handleInput","e","setState","target","files","console","log","name","upload","formData","FormData","append","post","then","res","toggle","componentDidMount","props","render","reservations","map","el","nomUser","phoneUser","etsUser","roleUser","nomSalle","startDate","endDate","nbre_personne","evenement","updateReservation","_id","deleteReservation","mapStateToProps","reservation","connect"],"mappings":"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,gBAqCC,oBAAC,MAAD;AACE,MAAA,SAAS,EAAC,QADZ;AAEE,MAAA,OAAO,MAFT;AAGE,MAAA,KAAK,EAAC,SAHR;AAIE,MAAA,OAAO,EAAE,MACP,KAAKU,KAAL,CAAWc,iBAAX,CACEV,EAAE,CAACW,GADL,EAEE,KAAKrC,KAAL,CAAWC,QAFb,CALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAtCJ,CAvBF,eA4EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD,CACE;AADF;AAEE,MAAA,OAAO,MAFT;AAGE,MAAA,KAAK,EAAC,QAHR;AAIE,MAAA,SAAS,EAAC,QAJZ;AAKE,MAAA,OAAO,EAAE,OACP,KAAKmB,MAAL,IAAe,KAAKE,KAAL,CAAWgB,iBAAX,CAA6BZ,EAAE,CAACW,GAAhC,CADR,CALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CA5EF,CADD,CADH,CAhBF,CADD,gBAiHC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlHJ,CADF;AAuHD;;AAnJmC;;AAqJtC,MAAME,eAAe,GAAIvC,KAAD,KAAY;AAClCwC,EAAAA,WAAW,EAAExC,KAAK,CAACwC;AADe,CAAZ,CAAxB;;AAIA,eAAeC,OAAO,CAACF,eAAD,EAAkB;AACtChD,EAAAA,cADsC;AAEtCC,EAAAA,gBAFsC;AAGtCC,EAAAA,aAHsC;AAItCC,EAAAA;AAJsC,CAAlB,CAAP,CAKZI,aALY,CAAf,C,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {\n  getReservation,\n  editDecisionInDB,\n} from \"../../actions/reservationAction\";\nimport { getAideFromDB } from \"../../actions/aideActionCreator\";\nimport { getUser } from \"../../actions/auth\";\nimport axios from \"axios\";\n\nimport ModalcalenderAdmin from \"./modalcalender\";\nimport ModalDevis from \"./modalDevis\";\n//import {addDisabledDays, updateSalle} from \"../Redux/actions/reservation\"\nclass GestionReserv extends Component {\n  state = {\n    decision: \"Valider\",\n    devis: \"\",\n    disabled: \"disabled Days\",\n    valid: \"true\",\n  };\n  toggle() {\n    this.setState({ disabled: \"enable Days\" });\n  }\n\n  componentDidMount() {\n    this.props.getReservation();\n  }\n  handleInput = (e) => {\n    this.setState({ devis: e.target.files[0] });\n    console.log(\"devis\", e.target.files[0].name);\n  };\n\n  upload = (e) => {\n    const formData = new FormData();\n    formData.append(\"devis\", this.state.devis);\n    axios.post(\"http://localhost:8000/\", formData).then((res) => {\n      console.log(this.state.devis.name);\n    });\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.reservations ? (\n          <MDBTable>\n            <MDBTableHead color=\"elegant-color-dark\" textWhite>\n              <tr>\n                <th>Nom</th>\n                <th>Phone</th>\n                <th>Entreprise</th>\n                <th>Locataire</th>\n                <th>salle</th>\n                <th>Date</th>\n                <th>personnes</th>\n                <th>Evenement</th>\n                <th>Decision</th>\n                <th>Valider</th>\n                <th>Ajouter disabled days</th>\n              </tr>\n            </MDBTableHead>\n            <MDBTableBody>\n              {this.props.reservations.map((el) => (\n                <tr>\n                  <td>{el.nomUser}</td>\n                  <td>{el.phoneUser}</td>\n                  <td>{el.etsUser}</td>\n                  <td>{el.roleUser}</td>\n                  <td>{el.nomSalle}</td>\n                  <td>\n                    {/* <AdminCalendar startDate={el.startDate} endDate={el.endDate}/> */}\n                    <ModalcalenderAdmin\n                      startDate={el.startDate}\n                      endDate={el.endDate}\n                    />\n                  </td>\n                  <td>{el.nbre_personne}</td>\n                  <td>{el.evenement}</td>\n                  <td>\n                    {el.roleUser === \"userExterne\" &&\n                    el.decision !== \"en attente\" ? (\n                      <ModalDevis image={el.decision} />\n                    ) : (\n                      el.decision\n                    )}\n                  </td>\n                  <td>\n                    {el.roleUser === \"userExterne\" ? (\n                      <>\n                        <div className=\"custom-file\">\n                          <input\n                            onChange={(e) => {\n                              this.handleInput(e);\n                            }}\n                            type=\"file\"\n                            className=\"custom-file-input\"\n                            id=\"inputGroupFile01\"\n                            aria-describedby=\"inputGroupFileAddon01\"\n                          />\n                          <label\n                            className=\"custom-file-label\"\n                            htmlFor=\"inputGroupFile01\"\n                          >\n                            Choose file\n                          </label>\n\n                          <>\n                            <MDBBtn\n                              className=\"btn-sm\"\n                              color=\"elegant\"\n                              onClick={() => (\n                                this.upload(),\n                                this.props.updateReservation(\n                                  el._id,\n                                  this.state.devis.name\n                                )\n                              )}\n                            >\n                              Devis\n                            </MDBBtn>\n                          </>\n                        </div>\n                      </>\n                    ) : (\n                      <MDBBtn\n                        className=\"btn-sm\"\n                        outline\n                        color=\"success\"\n                        onClick={() =>\n                          this.props.updateReservation(\n                            el._id,\n                            this.state.decision\n                          )\n                        }\n                      >\n                        Valider\n                      </MDBBtn>\n                    )}\n                  </td>\n                  <td>\n                    <MDBBtn\n                      // btn-blue-grey\n                      outline\n                      color=\"danger\"\n                      className=\"btn-sm\"\n                      onClick={() => (\n                        this.toggle(), this.props.deleteReservation(el._id)\n                      )}\n                    >\n                      spprimer\n                    </MDBBtn>\n                  </td>\n                </tr>\n              ))}\n            </MDBTableBody>\n          </MDBTable>\n        ) : (\n          <div className=\"loader\"></div>\n        )}\n      </>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  reservation: state.reservation,\n});\n\nexport default connect(mapStateToProps, {\n  getReservation,\n  editDecisionInDB,\n  getAideFromDB,\n  getUser,\n})(GestionReserv);\n// import React, { Component } from \"react\";\n// import { connect } from \"react-redux\";\n// import { getAideFromDB } from \"../../actions/aideActionCreator\";\n// import {\n//   getReservation,\n//   editDecisionInDB,\n// } from \"../../actions/reservationAction\";\n// import { getUser } from \"../../actions/auth\";\n// import { Label, Table, Button } from \"semantic-ui-react\";\n// import { MDBInput } from \"mdbreact\";\n// import axios from \"axios\";\n\n// export class GestionReserv extends Component {\n//   state = {\n//     decision: \"Validée\",\n//     deci: \"Annulée\",\n//     devis: \"\",\n//   };\n//   componentDidMount() {\n//     this.props.getAideFromDB();\n//     this.props.getReservation();\n//     this.props.getUser();\n//   }\n//   /********************** upload devis ******************* */\n//   handleInput = (e) => {\n//     this.setState({ devis: e.target.files[0] });\n//     console.log(\"devis\", e.target.files[0].name);\n//   };\n\n//   upload = (e) => {\n//     const formData = new FormData();\n//     formData.append(\"devis\", this.state.devis);\n//     axios.post(\"http://localhost:8000/\", formData).then((res) => {\n//       console.log(this.state.devis.name);\n//     });\n//   };\n//   render() {\n//     return (\n//       <div className=\"liste-reservation \">\n//         <Table celled>\n//           <Table.Header>\n//             <Table.Row>\n//               <Table.HeaderCell>Nom-Prénom-client</Table.HeaderCell>\n//               <Table.HeaderCell>Délégation</Table.HeaderCell>\n//               <Table.HeaderCell>Num-Tél</Table.HeaderCell>\n//               <Table.HeaderCell>Age</Table.HeaderCell>\n\n//               <Table.HeaderCell>Adresse</Table.HeaderCell>\n//               <Table.HeaderCell>Service</Table.HeaderCell>\n//               <Table.HeaderCell>Jours</Table.HeaderCell>\n//               <Table.HeaderCell>Actions</Table.HeaderCell>\n//               <Table.HeaderCell>Devis</Table.HeaderCell>\n//               <Table.HeaderCell> Décision</Table.HeaderCell>\n//             </Table.Row>\n//           </Table.Header>\n\n//           <Table.Body>\n//             {this.props.reservation.map((el, i) => (\n//               <Table.Row>\n//                 <Table.Cell>\n//                   <Label ribbon>{el.client.nom_prenom}</Label>\n//                 </Table.Cell>\n//                 <Table.Cell>{el.ville}</Table.Cell>\n//                 <Table.Cell>{el.num_client}</Table.Cell>\n\n//                 <Table.Cell>{el.age}</Table.Cell>\n//                 <Table.Cell>{el.adresse_client}</Table.Cell>\n//                 <Table.Cell>{el.service}</Table.Cell>\n//                 <Table.Cell>\n//                   {el.dispo.map((el) => (\n//                     <p>{el}</p>\n//                   ))}\n//                 </Table.Cell>\n\n//                 <Table.Cell>\n//                   <Button\n//                     outline\n//                     size=\"sm\"\n//                     onClick={() => (\n//                       this.upload(),\n//                       this.props.editDecisionInDB({\n//                         _id: el._id,\n//                         decision: this.state.decision,\n//                         devis: this.state.devis.name,\n//                       })\n//                     )}\n//                   >\n//                     <i class=\"fas fa-check-square\"></i>\n//                   </Button>\n//                   <Button\n//                     outline\n//                     size=\"sm\"\n//                     onClick={() =>\n//                       this.props.editDecisionInDB({\n//                         _id: el._id,\n//                         decision: this.state.deci,\n//                       })\n//                     }\n//                   >\n//                     <i class=\"fas fa-trash\"></i>\n//                   </Button>\n//                 </Table.Cell>\n//                 <Table.Cell className=\"pos-Action \">\n//                   <MDBInput\n//                     type=\"file\"\n//                     onChange={(e) => this.handleInput(e)}\n//                     outline\n//                   />\n//                 </Table.Cell>\n//                 <Table.Cell>\n//                   {\" \"}\n//                   {el.decision === \"Validée\" ? (\n//                     <img\n//                       src={\"http://localhost:8000/\" + el.devis}\n//                       width=\"50px\"\n//                     />\n//                   ) : (\n//                     el.decision\n//                   )}\n//                 </Table.Cell>\n//               </Table.Row>\n//             ))}{\" \"}\n//           </Table.Body>\n\n//           <Table.Footer>\n//             <Table.Row>\n//               <Table.HeaderCell colSpan=\"3\"></Table.HeaderCell>\n//             </Table.Row>\n//           </Table.Footer>\n//         </Table>\n//       </div>\n//     );\n//   }\n// }\n// const mapStateToProps = (state) => {\n//   return {\n//     aides: state.aides,\n//     reservation: state.reservation,\n//     user: state.auth,\n//   };\n// };\n// export default connect(mapStateToProps, {\n//   getAideFromDB,\n//   getReservation,\n//   getUser,\n//   editDecisionInDB,\n// })(GestionReserv);\n"]},"metadata":{},"sourceType":"module"}